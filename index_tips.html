<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- 禁止用户双击放大 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>常见小技巧</title>
    <style>
        body {}
    </style>
</head>

<body>
    <script>
        console.log('set+...(扩展运算符)方法过滤重复值');
        let arr = [1, 2, 2, 3, 6, 7, 7, 8, 2];
        let uniqueArr = [...new Set(arr)];
        uniqueArr.sort(function () {
            return -1;
        })
        console.log(arr, uniqueArr);
        console.log('--------------------------------------------------------');
        console.log('通过加法运算符+将一个string类型的变量转回为number 类型,当这种情况发生时(您希望返回一个整数，而不是浮点数)，您可以使用两个波浪号:~~');
        let int = "15";
        let int2 = '15.667'
        let int3 = '15.667'
        int = +int;
        int2 = +int2;
        int3 = ~~int3;
        console.log(int, int2, int3); // Result: 15
        console.log(typeof int, typeof int2, typeof int3);
        console.log('--------------------------------------------------------');
        // RegExp.$1的使用方式
        var str2 = '120pt'
        var str3 = '120px'
        var regtest = /^(\d+)(pt|px|em)?/
        console.log(regtest.exec(str2))//整个正则表达式反回的结果。
        console.log(RegExp.$1)//返回正则中第一个子表达式的结果。
        console.log(RegExp.$2)//返回正则中第二个子表达式的结果。
        // console.log(regtest.exec(str3))//整个正则表达式反回的结果。
        // 使用RegExp.$1，必须使用一次正则，exec或者test(正则方法),或者match(字符串方法)
        // console.log(RegExp.$1)//返回正则中第第一个子表达式的结果。
        // console.log(RegExp.$2)//返回正则中第二个子表达式的结果。
        console.log('--------------------------------------------------------');
        // 使用rem
        document.documentElement.style.fontSize = document.documentElement.clientWidth / 750 * 100 + 'px';
        console.log('--------------------------------------------------------');
        console.log('--------------------------浅拷贝和深拷贝问题------------------------------');
        function deepClone(val) {
            if (isPrototypeObject(val)) {
                let obj = {};
                for (let key in val) {
                    obj[key] = deepClone(val[key])
                }
            } else if (Array.isArray(val)) {
                return val.slice();
            } else {
                return val;
            }
            function isPrototypeObject(obj) {
                return Object.prototype.toString.call(obj) === "[Object Object]";
            }
        }
        console.log('--------------------------数据劫持(对object的相关属性数据劫持，监听，读取修改数据绑定到getter和setter)问题------------------------------');

        //         < !DOCTYPE html >
        //             <html>
        //                 <head>
        //                     <meta charset="utf-8">
        //                         <title>动态数据绑定（一）</title>
        // </head>
        //                     <body>
        //                         <script>
        // var data = {
        //     user: {
        //         name: 'xiaoming',
        //         age: 18,
        //         occupation: 'frontend'
        //     },
        //     address: {
        //         city: 'shaoguan'
        //     }
        // };
        // function Observer(data) {
        //     this.data = data;
        //     this.walk(data);
        // }
        // Observer.prototype = {
        //     walk: function (obj) {
        //         var value,
        //             key;
        //         for (key in obj) {
        //             if (obj.hasOwnProperty(key)) {
        //                 value = obj[key];
        //                 if (typeof value === 'object') {
        //                     new Observer(value);
        //                 }
        //                 this.convert(key, value);
        //             }
        //         }
        //     },
        //     convert: function (key, value) {
        //         Object.defineProperty(this.data, key, {
        //             get: function () {
        //                 console.log("你访问了" + key);
        //                 return value;
        //             },
        //             set: function (newValue) {
        //                 value = newValue;
        //                 console.log('你设置了' + key + '=' + value);
        //             }
        //         });
        //     }
        // }
        // var example = new Observer(data);
        console.log('---------------------------------------绘家小程序------------------------------------------');
        // 厉害的css属性之pointer-events:https://www.html.cn/book/css/properties/user-interface/pointer-events.htm
    </script>
</body>

</html>